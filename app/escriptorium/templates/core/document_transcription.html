{% extends 'core/document_nav.html' %}
{% load i18n staticfiles %}

{% block nav-trans-active %}active{% endblock %}

{% block nav_content %}

<div class="row" style="position: relative;">
  {% if previous %}<a class="nav-btn nav-prev" href="{% url 'document-transcription' pk=object.pk part_pk=previous.pk %}" title="{% trans "Previous" %}"><i class="fas fa-angle-left"></i></a>{% endif %}
  {% if next %}<a class="nav-btn nav-next" href="{% url 'document-transcription' pk=object.pk part_pk=next.pk %}" title="{% trans "Next" %}"><i class="fas fa-angle-right"></i></a>{% endif %}
  
  <div class="col-6">
    <div id="img-container">
    <img id="part-img" src="{{ part.image.url }}" width="100%"/>
    <div id="overlay"></div>
    </div>
  </div>
  <div class="col-6">
    <div id="trans-container">
      <div id="part-trans"></div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script src="{% static 'js/wheelzoom.js' %}"></script>
<script src="{% static 'js/transcription.js' %}"></script>
<script type="text/javascript">
$(document).ready(function() {
$('#part-img').ready(function() {
    var ratio = $('#part-img').width() / {{ part.image.width }};
    {% for line in part.lines.all %}new TranscriptionLine({{line.box}}, "{{line.text}}", ratio);
    {% endfor %}
    });
    // TODO: automatic zoom Oo
});
</script>
{% endblock %}
